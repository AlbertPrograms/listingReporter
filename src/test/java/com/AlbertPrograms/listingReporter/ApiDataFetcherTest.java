package com.AlbertPrograms.listingReporter;

import org.junit.Assert;
import org.junit.Test;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class ApiDataFetcherTest extends ApiDataFetcher {
  @Test
  public void apiFetcherResponseValidation() {
    ApiDataFetcherStub apiDataFetcherStub = new ApiDataFetcherStub();

    List<Listing> listings = apiDataFetcherStub.fetchFromMockaroo("listing", Listing.class, Listing[].class);
    Assert.assertEquals(28, listings.size());
    for (Listing listing : listings)
      Assert.assertNotNull(listing);

    List<Location> locations = apiDataFetcherStub.fetchFromMockaroo("location", Location.class, Location[].class);
    Assert.assertEquals(10, locations.size());
    for (Location location : locations)
      Assert.assertNotNull(location);

    List<ListingStatus> listingStatuses = apiDataFetcherStub.fetchFromMockaroo("listingStatus", ListingStatus.class, ListingStatus[].class);
    Assert.assertEquals(3, listingStatuses.size());
    for (ListingStatus listingStatus : listingStatuses)
      Assert.assertNotNull(listingStatus);

    List<Marketplace> marketplaces = apiDataFetcherStub.fetchFromMockaroo("marketplace", Marketplace.class, Marketplace[].class);
    Assert.assertEquals(2, marketplaces.size());
    for (Marketplace marketplace : marketplaces)
      Assert.assertNotNull(marketplace);

    List<CurrencyWrapper> currencies = apiDataFetcherStub.fetchFromMockaroo("currency", CurrencyWrapper.class, CurrencyWrapper[].class);
    Assert.assertEquals(1, currencies.size());
    for (CurrencyWrapper currency : currencies) Assert.assertNotNull(currency);
    Assert.assertNotEquals(0, currencies.get(0).rates.HUF);
    Assert.assertNotEquals(0, currencies.get(0).rates.USD);
    Assert.assertNotEquals(0, currencies.get(0).rates.GBP);
    Assert.assertNotEquals(0, currencies.get(0).rates.AUD);
    Assert.assertNotEquals(0, currencies.get(0).rates.JPY);
  }
}

class ApiDataFetcherStub extends ApiDataFetcher {
  @Override
  protected List<String> fetchJsonFromURL(String urlString) {
    String sampleListingArray = "[{\"id\":\"f73e798c-f86d-45ec-9e34-232b3e02271c\",\"title\":\"Crested Sedge\",\"description\":\"Carex cristatella Britton\",\"location_id\":\"52ea143e-cb45-43af-981e-92cedb89f7a8\",\"listing_price\":657.03,\"currency\":\"JPY\",\"quantity\":28,\"listing_status\":1,\"marketplace\":1,\"upload_time\":\"2/13/2017\",\"owner_email_address\":\"dburrows@live.com\"},{\"id\":\"712166ed-e2e4-4ac7-b79a-538951f97891\",\"title\":\"Wasatch Beardtongue\",\"description\":\"Penstemon cyananthus Hook.\",\"location_id\":\"1d551b07-fd16-4760-88a3-4aa4fda13a2b\",\"listing_price\":772.64,\"currency\":\"USD\",\"quantity\":34,\"listing_status\":1,\"marketplace\":1,\"upload_time\":\"11/9/2017\",\"owner_email_address\":\"krueger@yahoo.com\"},{\"id\":\"0ff423de-20a7-4ae2-a39f-d2a443fd7479\",\"title\":\"Humboldt Lily\",\"description\":\"Lilium humboldtii Roezl \\u0026 Leichtlin ex Duch.\",\"location_id\":\"5249f33c-fadf-44d9-ab70-471df29c20a6\",\"listing_price\":97.53,\"currency\":\"USD\",\"quantity\":9,\"listing_status\":2,\"marketplace\":1,\"upload_time\":null,\"owner_email_address\":\".icloud.com\"},{\"id\":\"10f133d2-ab33-4dd1-ab61-83b947f394e1\",\"title\":\"Widowscross\",\"description\":\"Sedum pulchellum Michx.\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":711.51,\"currency\":\"JPY\",\"quantity\":42,\"listing_status\":1,\"marketplace\":1,\"upload_time\":\"6/11/2017\",\"owner_email_address\":\"crobles@yahoo.com\"},{\"id\":\"1c22f8c8-e707-4974-97b2-53645e39aafd\",\"title\":\"Vredenberg Ice Plant\",\"description\":\"Lampranthus vredenbergensis L. Bolus\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":213.48,\"currency\":\"USD\",\"quantity\":35,\"listing_status\":1,\"marketplace\":2,\"upload_time\":\"8/17/2017\",\"owner_email_address\":\"policiesATmac.com\"},{\"id\":\"8f3c6386-0c1b-434c-88ad-8fcee843ab4e\",\"title\":\"Trumpet Gooseberry\",\"description\":\"Ribes leptanthum A. Gray\",\"location_id\":\"1d551b07-fd16-4760-88a3-4aa4fda13a2b\",\"listing_price\":150.55,\"currency\":\"AUD\",\"quantity\":21,\"listing_status\":3,\"marketplace\":2,\"upload_time\":\"10/29/2018\",\"owner_email_address\":\"crobles@yahoo.com\"},{\"id\":\"8018e3b0-7c55-421f-ae54-8273cac6030a\",\"title\":\"Scribble Lichen\",\"description\":\"Opegrapha Ach.\",\"location_id\":\"c47ab7b4-3a94-4218-8e0b-4bada1fb05c0\",\"listing_price\":677.35,\"currency\":\"AUD\",\"quantity\":46,\"listing_status\":3,\"marketplace\":1,\"upload_time\":\"12/5/2018\",\"owner_email_address\":\"krueger@yahoo.com\"},{\"id\":\"65a17e84-7d51-4876-8d0a-7fb0b44c3ff2\",\"title\":\"Fibraurea\",\"description\":\"Fibraurea tinctoria Lour.\",\"location_id\":\"5249f33c-fadf-44d9-ab70-471df29c20a6\",\"listing_price\":-37,\"currency\":\"GBP\",\"quantity\":46,\"listing_status\":3,\"marketplace\":2,\"upload_time\":\"4/22/2017\",\"owner_email_address\":\"outlook.com\"},{\"id\":\"9c55b585-09bd-49cd-a236-cc2d90d53885\",\"title\":\"Madonna Lily\",\"description\":\"Lilium candidum L.\",\"location_id\":\"5249f33c-fadf-44d9-ab70-471df29c20a6\",\"listing_price\":765.69,\"currency\":\"HUF\",\"quantity\":34,\"listing_status\":1,\"marketplace\":2,\"upload_time\":\"3/22/2017\",\"owner_email_address\":\"dburrows@live.com\"},{\"id\":\"f3d5ef7b-a0e5-48bb-b800-5ddcfbaeee72\",\"title\":\"Point Reyes Ceanothus\",\"description\":\"Ceanothus gloriosus J.T. Howell var. exaltatus J.T. Howell\",\"location_id\":\"1d551b07-fd16-4760-88a3-4aa4fda13a2b\",\"listing_price\":551.66,\"currency\":\"AUD\",\"quantity\":5,\"listing_status\":2,\"marketplace\":2,\"upload_time\":\"4/17/2018\",\"owner_email_address\":\"naoya@verizon.net\"},{\"id\":\"0b3da014-528e-462d-9a36-00b6fde28372\",\"title\":\"Slenderleaf Sundew\",\"description\":\"Drosera linearis Goldie\",\"location_id\":\"5c3a4cf8-1ac4-456d-ba85-a782ff475256\",\"listing_price\":986.34,\"currency\":\"USD\",\"quantity\":36,\"listing_status\":0,\"marketplace\":1,\"upload_time\":\"8/14/2018\",\"owner_email_address\":\".icloud.com\"},{\"id\":\"ed985f1a-df10-4d26-9fe7-cc35b53f728c\",\"title\":\"Carpenter's Groundcherry\",\"description\":\"Physalis carpenteri Riddell ex Rydb.\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":364.55,\"currency\":\"GBP\",\"quantity\":47,\"listing_status\":0,\"marketplace\":2,\"upload_time\":\"11/23/2018\",\"owner_email_address\":\"krueger@yahoo.com\"},{\"id\":\"1c5b4ffe-51cd-483f-9c0c-c37a6116db52\",\"title\":\"Trans-pecos Croton\",\"description\":\"Croton sancti-lazari Croizat\",\"location_id\":\"c47ab7b4-3a94-4218-8e0b-4bada1fb05c0\",\"listing_price\":799.74,\"currency\":\"USD\",\"quantity\":9,\"listing_status\":2,\"marketplace\":1,\"upload_time\":\"6/21/2017\",\"owner_email_address\":\"dburrows@live.com\"},{\"id\":\"c613ea7a-4346-4725-a8f8-422d88ce2055\",\"title\":\"Woolly Blackberry\",\"description\":\"Rubus tomentosus Borkh.\",\"location_id\":\"52ea143e-cb45-43af-981e-92cedb89f7a8\",\"listing_price\":192.9,\"currency\":\"JPY\",\"quantity\":34,\"listing_status\":2,\"marketplace\":1,\"upload_time\":\"1/4/2018\",\"owner_email_address\":\"crobles@yahoo.com\"},{\"id\":\"305dca7f-2dcb-45c6-b86c-ed44a776681e\",\"title\":\"Beebalm\",\"description\":\"Monarda ×medioides Duncan\",\"location_id\":\"5c3a4cf8-1ac4-456d-ba85-a782ff475256\",\"listing_price\":441.32,\"currency\":\"AUD\",\"quantity\":25,\"listing_status\":3,\"marketplace\":1,\"upload_time\":\"3/8/2018\",\"owner_email_address\":\"jipsen@hotmail.com\"},{\"id\":\"d33e45c8-a249-4201-9389-29f51f795fa3\",\"title\":\"Silver Dwarf Morning-glory\",\"description\":\"Evolvulus sericeus Sw. var. sericeus\",\"location_id\":\"bfcd9dc2-3ead-470b-9846-5a3f6d8f32a1\",\"listing_price\":395.7,\"currency\":\"EUR\",\"quantity\":18,\"listing_status\":2,\"marketplace\":2,\"upload_time\":\"7/17/2017\",\"owner_email_address\":\"cderoove@aolcom\"},{\"id\":\"29c25a14-0a0e-45e1-b6c4-7e9991655c25\",\"title\":\"Slimspike Threeawn\",\"description\":\"Aristida longespica Poir. var. geniculata (Raf.) Fernald\",\"location_id\":\"1d551b07-fd16-4760-88a3-4aa4fda13a2b\",\"listing_price\":856.5,\"currency\":\"AUD\",\"quantity\":42,\"listing_status\":3,\"marketplace\":1,\"upload_time\":\"8/23/2017\",\"owner_email_address\":\"jipsen@hotmail.com\"},{\"id\":\"77b7f11a-8761-4247-a949-0244f40c83e0\",\"title\":\"Cotta Grass\",\"description\":\"Cottea pappophoroides Kunth\",\"location_id\":\"5ae22efb-f875-4134-a03d-6402efa31dc5\",\"listing_price\":678.28,\"currency\":\"EUR\",\"quantity\":33,\"listing_status\":2,\"marketplace\":1,\"upload_time\":\"4/29/2018\",\"owner_email_address\":\"mallanmba@mac.com\"},{\"id\":\"04892073-6e53-429f-8acf-a4b84a44f980\",\"title\":\"Hall's Milkvetch\",\"description\":\"Astragalus hallii A. Gray var. hallii\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":47.28,\"currency\":\"EUR\",\"quantity\":13,\"listing_status\":1,\"marketplace\":1,\"upload_time\":\"8/11/2017\",\"owner_email_address\":\"cderoove@aolcom\"},{\"id\":\"baca1751-fa1c-4f36-8f11-6313aee7744d\",\"title\":\"Manatee Dewberry\",\"description\":\"Rubus lucidus Rydb.\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":822.6,\"currency\":\"EUR\",\"quantity\":2,\"listing_status\":1,\"marketplace\":2,\"upload_time\":\"1/18/2018\",\"owner_email_address\":\"mallanmba@mac.com\"},{\"id\":\"b26a0070-9e0b-4986-83f4-94dd9bd325dc\",\"title\":\"Meyen's Sedge\",\"description\":\"Carex meyenii Nees\",\"location_id\":\"0fe479bb-fe39-4265-b59f-bb4ac5a060d4\",\"listing_price\":948.51,\"currency\":\"GBP\",\"quantity\":21,\"listing_status\":0,\"marketplace\":2,\"upload_time\":null,\"owner_email_address\":\".icloud.com\"},{\"id\":\"a7ca619e-35e1-4f5e-b6ee-203243f51f40\",\"title\":\"Hairybeast Turtleback\",\"description\":\"Psathyrotes pilifera A. Gray\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":330.79,\"currency\":\"JPY\",\"quantity\":36,\"listing_status\":0,\"marketplace\":2,\"upload_time\":\"3/9/2017\",\"owner_email_address\":\".icloud.com\"},{\"id\":\"28516352-0e6f-4ee4-aee3-43a2583141c4\",\"title\":\"Rattan's Monkeyflower\",\"description\":\"Mimulus rattanii A. Gray var. decurtatus (A.L. Grant) Pennell\",\"location_id\":\"c47ab7b4-3a94-4218-8e0b-4bada1fb05c0\",\"listing_price\":28.17,\"currency\":\"EUR\",\"quantity\":5,\"listing_status\":1,\"marketplace\":1,\"upload_time\":\"2/19/2018\",\"owner_email_address\":\"mhanoh@verizon.net\"},{\"id\":\"071d9fcb-e335-4193-8c74-495262bceb27\",\"title\":\"Fourspike Fingergrass\",\"description\":\"Eustachys neglecta (Nash) Nash\",\"location_id\":\"0fe479bb-fe39-4265-b59f-bb4ac5a060d4\",\"listing_price\":178.84,\"currency\":\"AUD\",\"quantity\":50,\"listing_status\":0,\"marketplace\":2,\"upload_time\":\"6/21/2018\",\"owner_email_address\":\"jgwang@aol.com\"},{\"id\":\"7bb8949b-fa85-45b0-93ad-b5c8d0d77467\",\"title\":\"Beach Milkvine\",\"description\":\"Matelea maritima (Jacq.) Woodson\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":616.44,\"currency\":\"USD\",\"quantity\":1,\"listing_status\":0,\"marketplace\":1,\"upload_time\":\"2/27/2018\",\"owner_email_address\":\"jipsen@hotmail.com\"},{\"id\":\"b5cb997b-e51d-4b69-a70b-1dab7e083af1\",\"title\":\"Spiderleaf\",\"description\":\"Ipomoea tenuiloba Torr. var. lemmonii (A. Gray) Yatsk. \\u0026 C.T. Mason\",\"location_id\":\"bfcd9dc2-3ead-470b-9846-5a3f6d8f32a1\",\"listing_price\":254.98,\"currency\":\"GBP\",\"quantity\":23,\"listing_status\":3,\"marketplace\":2,\"upload_time\":null,\"owner_email_address\":\"naoya@verizon.net\"},{\"id\":\"508637fb-ec37-4e27-bf5e-dc72990b06fa\",\"title\":\"Common Selfheal\",\"description\":\"Prunella vulgaris L. ssp. vulgaris\",\"location_id\":\"5ae22efb-f875-4134-a03d-6402efa31dc5\",\"listing_price\":146.57,\"currency\":\"USD\",\"quantity\":31,\"listing_status\":2,\"marketplace\":1,\"upload_time\":\"5/8/2017\",\"owner_email_address\":\"wkrebs@comcast.net\"},{\"id\":\"74a8473a-2325-454c-bcd7-2d75f96e9a6b\",\"title\":\"Serrate Ephemerum Moss\",\"description\":\"Ephemerum serratum (Hedw.) Hampe\",\"location_id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"listing_price\":918.6,\"currency\":\"USD\",\"quantity\":23,\"listing_status\":3,\"marketplace\":2,\"upload_time\":\"12/20/2017\",\"owner_email_address\":\"naoya@verizon.net\"}]";
    String sampleLocationArray = "[{\"id\":\"0fe479bb-fe39-4265-b59f-bb4ac5a060d4\",\"manager_name\":\"Godfrey Carlyon\",\"phone\":\"458-858-5807\",\"address_primary\":\"55 Bluejay Hill\",\"address_secondary\":null,\"country\":\"Russia\",\"town\":\"Egvekinot\",\"postal_code\":\"461173\"},{\"id\":\"ac867cd8-c321-42ab-b179-01a4b8301a9c\",\"manager_name\":\"Elna Plan\",\"phone\":\"649-103-0441\",\"address_primary\":\"04892 Vermont Park\",\"address_secondary\":null,\"country\":\"Lithuania\",\"town\":\"Ukmerge\",\"postal_code\":\"20012\"},{\"id\":\"bfcd9dc2-3ead-470b-9846-5a3f6d8f32a1\",\"manager_name\":\"Lynett Osmund\",\"phone\":\"135-271-2474\",\"address_primary\":\"02494 Shopko Plaza\",\"address_secondary\":null,\"country\":\"Czech Republic\",\"town\":\"Bukovany\",\"postal_code\":\"772 00\"},{\"id\":\"5ae22efb-f875-4134-a03d-6402efa31dc5\",\"manager_name\":\"Dix Bewick\",\"phone\":\"968-940-4297\",\"address_primary\":\"53924 Dakota Street\",\"address_secondary\":null,\"country\":\"Malaysia\",\"town\":\"Alor Setar\",\"postal_code\":\"05720\"},{\"id\":\"1d551b07-fd16-4760-88a3-4aa4fda13a2b\",\"manager_name\":\"Judye Hassewell\",\"phone\":\"334-665-4608\",\"address_primary\":\"7 Waubesa Place\",\"address_secondary\":null,\"country\":\"Brazil\",\"town\":\"Indaial\",\"postal_code\":\"89130-000\"},{\"id\":\"52ea143e-cb45-43af-981e-92cedb89f7a8\",\"manager_name\":\"Dorrie Malt\",\"phone\":\"382-698-8512\",\"address_primary\":\"62 Namekagon Avenue\",\"address_secondary\":null,\"country\":\"Greece\",\"town\":\"Níkaia\",\"postal_code\":null},{\"id\":\"c47ab7b4-3a94-4218-8e0b-4bada1fb05c0\",\"manager_name\":\"Jaimie Voak\",\"phone\":\"980-631-6883\",\"address_primary\":\"17755 Dennis Place\",\"address_secondary\":null,\"country\":\"France\",\"town\":\"La Chapelle-sur-Erdre\",\"postal_code\":\"44244 CEDEX\"},{\"id\":\"5c3a4cf8-1ac4-456d-ba85-a782ff475256\",\"manager_name\":\"Teodoro MacColgan\",\"phone\":\"630-155-4956\",\"address_primary\":\"712 Hallows Place\",\"address_secondary\":null,\"country\":\"Russia\",\"town\":\"Kuloy\",\"postal_code\":\"165100\"},{\"id\":\"013cc380-c18b-4c87-8043-16e14f7127de\",\"manager_name\":\"Aguie Egre\",\"phone\":\"926-525-7424\",\"address_primary\":\"799 Sunbrook Alley\",\"address_secondary\":null,\"country\":\"Czech Republic\",\"town\":\"Leština\",\"postal_code\":\"789 71\"},{\"id\":\"5249f33c-fadf-44d9-ab70-471df29c20a6\",\"manager_name\":\"Addison Wark\",\"phone\":\"107-587-8769\",\"address_primary\":\"77 Jenna Circle\",\"address_secondary\":null,\"country\":\"Poland\",\"town\":\"Mosty\",\"postal_code\":\"84-353\"}]";
    String sampleListingStatusArray = "[{\"id\":1,\"status_name\":\"ACTIVE\"},{\"id\":2,\"status_name\":\"SCHEDULED\"},{\"id\":3,\"status_name\":\"CANCELLED\"}]";
    String sampleMarketplaceArray = "[{\"id\":1,\"marketplace_name\":\"EBAY\"},{\"id\":2,\"marketplace_name\":\"AMAZON\"}]";
    String sampleCurrencyObject = "{\"base\":\"EUR\",\"rates\":{\"BGN\":1.9558,\"NZD\":1.7016,\"ILS\":4.0586,\"RUB\":73.2914,\"CAD\":1.5061,\"USD\":1.1273,\"PHP\":58.605,\"CHF\":1.1191,\"ZAR\":16.9681,\"AUD\":1.6173,\"JPY\":122.27,\"TRY\":6.5862,\"HKD\":8.8396,\"MYR\":4.6883,\"THB\":35.341,\"HRK\":7.4176,\"NOK\":9.7963,\"IDR\":16061.77,\"DKK\":7.468,\"CZK\":25.642,\"HUF\":321.53,\"GBP\":0.88675,\"MXN\":22.2505,\"KRW\":1336.22,\"ISK\":139.3,\"SGD\":1.5407,\"BRL\":4.3719,\"PLN\":4.2714,\"INR\":78.332,\"RON\":4.7216,\"CNY\":7.7893,\"SEK\":10.6562},\"date\":\"2019-06-07\"}";

    if (urlString.contains("listing?"))
      return new ArrayList<>(Collections.singletonList(sampleListingArray));
    else if (urlString.contains("location?"))
      return new ArrayList<>(Collections.singletonList(sampleLocationArray));
    else if (urlString.contains("listingStatus?"))
      return new ArrayList<>(Collections.singletonList(sampleListingStatusArray));
    else if (urlString.contains("marketplace?"))
      return new ArrayList<>(Collections.singletonList(sampleMarketplaceArray));
    else if (urlString.contains("currency?"))
      return new ArrayList<>(Collections.singletonList(sampleCurrencyObject));
    else
      return new ArrayList<>();
  }
}
